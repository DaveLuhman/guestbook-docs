---
title: "Device registration"
audience: "administrators"
summary: "Step-by-step process for registering kiosk devices with the backend API."
url_prefix: "/docs/admin"
nav_order: 4
icon: "plus-circle"
---

This page explains how kiosk devices are registered with the backend API.

## Overview

Device registration creates a device identity in the backend and provides the kiosk with an authentication token. This is a one-time process per device, typically done during initial kiosk setup.

## Registration Methods

### Method 1: Automatic Registration (Recommended)

The kiosk client can register itself automatically during first-run setup:

1. **Launch Kiosk Client**: Start the kiosk client application
2. **First-Run Window**: The configuration window appears automatically
3. **Enter Configuration**:
   - Server URL: Backend API URL (e.g., `https://api.guestbook.software`)
   - Device Name: Friendly name for this kiosk
   - Device Location: Physical location identifier
4. **Submit Configuration**: The kiosk client automatically:
   - Generates a device ID (6 characters)
   - Generates or receives a device token
   - Calls `POST /api/v1/devices/register` on the backend
   - Stores the configuration locally

### Method 2: Manual Registration via API

If automatic registration fails or you need to register devices programmatically:

```bash
curl -X POST https://api.guestbook.software/api/v1/devices/register \
  -H "Content-Type: application/json" \
  -d '{
    "id": "ABC123",
    "name": "Front Desk Kiosk",
    "location": "Main Lobby",
    "token": "device-authentication-token"
  }'
```

**Note**: Device tokens should be generated securely. The kiosk client generates tokens automatically during registration.

## Registration Process Details

### What Happens During Registration

1. **Device ID Generation**: The kiosk computes the end of it's mac address as a unique 6-character device ID (e.g., `ABC123`)
2. **Token Generation**: A device authentication token is provided by the kiosk if available from previous registration.
3. **Backend Registration**: The device is registered via `POST /api/v1/devices/register`
4. **Device Version Created**: The backend creates an initial device version record with name and location and generates a token for the device.
5. **Configuration Storage**: The kiosk client saves the device ID, token, and server URL locally

### Device Identity

Once registered, each device has:
- **Device ID**: 6-character unique identifier (e.g., `ABC123`)
- **Device Token**: Authentication token for API requests generated by the backend.
- **Device Version**: Initial version record with name and location

### Post-Registration

After successful registration:
- The device can submit entries to the backend
- The device appears in the admin portal's device list
- The device can send heartbeats to indicate it's online
- The device can be assigned to an organization (if applicable)

## Verifying Registration

### In Admin Portal

1. Navigate to **Devices** page
2. Look for your device by ID or name
3. Verify device shows as "Online" (after first heartbeat)

### Via API

```bash
curl https://api.guestbook.software/api/v1/devices/ABC123 \
  -H "Authorization: Bearer <admin-token>"
```

## Troubleshooting Registration

### Registration Fails

**"Device already exists"**
- Device ID is already registered
- Generate a new device ID or use an existing device

**"Invalid server URL"**
- Verify the backend API URL is correct and reachable
- Check network connectivity from the kiosk

**"Authentication failed"**
- Device registration endpoint may require specific configuration
- Check backend API logs for detailed error messages

### Device Not Appearing in Portal

- **Wait for sync**: Device may need to send a heartbeat first
- **Check backend**: Verify device exists in backend database
- **Refresh portal**: Try refreshing the admin portal page
- **Verify permissions**: Ensure your admin account can view devices

### Re-registering a Device

If you need to re-register a device:

1. **Reset Device**: Use the kiosk client's reset function (if available)
2. **Delete from Backend**: Remove device via admin portal or API
3. **Re-run Setup**: Start the kiosk client first-run process again

**Warning**: Re-registering will create a new device identity. Historical entries linked to the old device ID will remain associated with the old device.

## Device Assignment to Organizations

After registration, devices can be assigned to organizations:

1. Navigate to **Organizations** page in admin portal
2. Select an organization
3. Use "Attach Device" to link the device to the organization
4. This enables organization-scoped access control and reporting

## Next Steps

- See [Device Management](/docs/admin/device-management) for ongoing device operations
- Review [Troubleshooting](/docs/admin/troubleshooting) for common issues
- Check [Configuration](/docs/admin/configuration-customization) for device settings
